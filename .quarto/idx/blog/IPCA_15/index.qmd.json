{"title":"Acompanhando a inflação com a linguagem R","markdown":{"yaml":{"title":"Acompanhando a inflação com a linguagem R","author":"Andre Barbato","date":"2024-06-26","categories":["Inflação","R","IBGE","SIDRA"],"image":"capa.jpg","toc":true,"toccolor":"blue","toc-title":"Nesta página"},"headingText":"Introdução","containsRefs":false,"markdown":"\n\nIPCA-15 sobe 0,39% em Junho e fica em 4,06% no acumulado dos últimos 12 meses\n\n![Fonte: Unsplash](capa.jpg){fig-alt=\"Uso gratuito sob a Licença da Unsplash\" fig-align=\"left\" width=\"642\" height=\"427\"}\n\n\nO início de uma análise estatística começa sempre pelo tipo de variável que estamos estudando. Para cada tipo existe uma técnica específica para aplicar.\n\n```{r}\n#| warning: false \n# Carregar pacotes\nlibrary(sidrar)\nlibrary(tidyverse)\nlibrary(highcharter)\nlibrary(monochromeR)\n```\n\n```{r}\n#| warning: false \n# Recuperando os dados via SIDRA\nipca_15 <- sidrar::get_sidra(\n  x = 7062, # Tabela do IPCA-15\n  variable = 355, # Variável: IPCA-15 Variação Mensal (%)\n  period = c(\"last\" = 24) # Período últimos 24 meses  \n)\n\n```\n\n```{r}\n# Tratamento dos dados\n\n## Seleção das colunas\nipca_15 <- ipca_15 |>\n  rename(valor = 'Valor',\n         cod_mes = 'Mês (Código)',\n         cod_abertura = 'Geral, grupo, subgrupo, item e subitem (Código)',\n         desc_abertura = 'Geral, grupo, subgrupo, item e subitem') |> \n  select(valor, cod_mes, cod_abertura, desc_abertura)\n\n\n## Separando a coluna desc_abertura\nipca_15 <- ipca_15 |> \n  tidyr::separate_wider_delim(\n    cols = desc_abertura,\n    delim = \".\",\n    names = c(\"cod\", \"desc\"),\n    too_few = \"align_end\",\n    cols_remove = FALSE\n  )\n\n## Criando colunas\nipca_15 <- ipca_15 |>\n  mutate(\n    # Criando coluna data a partir da coluna cod_mes\n    data = lubridate::dmy(paste0(\"01\",\n                                 stringr::str_sub(cod_mes, start = -2),\n                                 stringr::str_sub(cod_mes, end = 4))),\n    # Criando tipo para os níveis de abertura\n    tipo_abertura = dplyr::case_when(\n      nchar(cod) == 1 ~ \"Grupo\",\n      nchar(cod) == 2 ~ \"Subgrupo\",\n      nchar(cod) == 4 ~ \"Item\",\n      nchar(cod) > 4 ~ \"Subitem\",\n      is.na(cod) ~ \"Geral\"\n    )\n    )\n\n```\n\n```{r}\n# Gráfico de evolução do IPCA-15\nipca_15 |> \n  filter(tipo_abertura == \"Geral\") |> \n  highcharter::hchart(type = \"line\",\n    hcaes(x = data,\n          y = valor),\n    name = \"IPCA-15\") |> \n  highcharter::hc_title(text = \"Evolução do IPCA-15\",\n                        align = \"left\") |> \n  highcharter::hc_xAxis(title = list(text = \"Data\")) |> \n  highcharter::hc_yAxis(title = list(text = \"Variação Mensal (%)\")) |> \n  highcharter::hc_yAxis(plotLines = list(\n    list(value = 0, \n         color = 'black',\n         width = 1.75, \n         dashStyle = \"shortdashdot\")))\n```\n\n```{r}\n# Criando a paleta de cores\nipca_grupos_pal <- RColorBrewer::brewer.pal(9, \n                                            name = \"Spectral\")\n# Nomes dos grupos\nipca_grupos_nomes <- ipca_15 |>\n  filter(tipo_abertura == \"Grupo\") |> \n  arrange(cod) |>\n  select(desc_abertura) |> \n  unique() |> \n  pull()\n\n# Gráfico de colunas empilhadas\nipca_15 |> \n  filter(tipo_abertura == \"Grupo\") |>\n  highcharter::hchart(\"column\",\n                      hcaes(x = data,\n                            y = valor,\n                            group = desc_abertura),\n                      name = ipca_grupos_nomes,\n                      color = ipca_grupos_pal,\n                      stacking = \"normal\") |>\n  highcharter::hc_title(text = \"Impacto dos grupos de produto e serviçoes no IPCA-15\",\n                        align = \"left\") |> \n  highcharter::hc_xAxis(title = list(text = \"Data\")) |> \n  highcharter::hc_yAxis(title = list(text = \"Variação Mensal (%)\"))\n```\n"},"formats":{"html":{"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"show","code-overflow":"scroll","code-link":true,"code-line-numbers":false,"code-tools":true,"tbl-colwidths":"auto","merge-includes":true,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["../../styles.css"],"highlight-style":"github","toc":true,"output-file":"index.html"},"language":{},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.2.253","editor":"visual","theme":{"light":["darkly","../../theme_dark_custom.scss"],"dark":"darkly"},"title":"Acompanhando a inflação com a linguagem R","author":"Andre Barbato","date":"2024-06-26","categories":["Inflação","R","IBGE","SIDRA"],"image":"capa.jpg","toccolor":"blue","toc-title":"Nesta página"},"extensions":{"book":{"multiFile":true}}}}}